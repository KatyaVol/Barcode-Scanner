# üì± Barcode Scanner (SwiftUI + UIKit)

iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤ EAN-8 –∏ EAN-13 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–∞–º–µ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é UIKit –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ SwiftUI —á–µ—Ä–µ–∑ `UIViewControllerRepresentable` –∏ —Ä–∞–±–æ—Ç—É —Å AVFoundation.

---

## üîç –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

- –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ —Å –∫–∞–º–µ—Ä—ã –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —à—Ç—Ä–∏—Ö-–∫–æ–¥—ã —Ñ–æ—Ä–º–∞—Ç–æ–≤ **EAN-8** –∏ **EAN-13**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π (–∫—Ä–∞—Å–Ω—ã–π/–∑–µ–ª—ë–Ω—ã–π)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ / –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É **MVVM** —Å Delegate pattern –¥–ª—è —Å–≤—è–∑–∏ UIKit ‚Üî SwiftUI

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (MVVM + Coordinator)

**Model** - –¥–∞–Ω–Ω—ã–µ –∏ –∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (`CameraError`, `AlertItem`)  
**View** - SwiftUI —ç–∫—Ä–∞–Ω—ã (`BarcodeScannerView`, `ScannerView`)  
**ViewModel** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (`BarcodeScannerViewModel`)  
**Coordinator** - –º–æ—Å—Ç –º–µ–∂–¥—É UIKit –∏ SwiftUI (`ScannerView.Coordinator`)

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. `ScannerViewController` (UIKit) –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `AVCaptureSession` –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞—Ö–≤–∞—Ç —Å –∫–∞–º–µ—Ä—ã
3. –ö–æ–≥–¥–∞ –±–∞—Ä–∫–æ–¥ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω, `AVCaptureMetadataOutputObjectsDelegate` –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
4. –î–µ–ª–µ–≥–∞—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `Coordinator`, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç `@Published` —Å–≤–æ–π—Å—Ç–≤–∞ –≤ `ViewModel`
5. SwiftUI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç UI (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–¥ –∏–ª–∏ –∞–ª–µ—Ä—Ç)

---

## üîÑ –¶–µ–ø–æ—á–∫–∞ —Å–æ–±—ã—Ç–∏–π ¬´–ö–∞–º–µ—Ä–∞ ‚Üí –ë–∞—Ä–∫–æ–¥ ‚Üí UI¬ª

1. `AVCaptureSession` –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ —Å –∫–∞–º–µ—Ä—ã
2. `AVCaptureMetadataOutput` –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –±–∞—Ä–∫–æ–¥
3. `metadataOutput(_:didOutput:)` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å –¥–∞–Ω–Ω—ã–º–∏ –±–∞—Ä–∫–æ–¥–∞
4. –ß–µ—Ä–µ–∑ –¥–µ–ª–µ–≥–∞—Ç ‚Üí `Coordinator` ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `scannedCode` –≤ ViewModel
5. `@Published` —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, SwiftUI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω–µ

–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–Ω–µ—Ç –∫–∞–º–µ—Ä—ã / –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç) –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —á–µ—Ä–µ–∑ –¥–µ–ª–µ–≥–∞—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `alertItem`, –∏ SwiftUI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `.alert()`.

–í–∞–∂–Ω–æ: –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ë—Ä–Ω—É—Ç—ã –≤ `DispatchQueue.main.async` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è "Modifying state during view update".

---

## ‚ñ∂Ô∏è –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Xcode 16.2+
- iOS 18.2+
- **–§–∏–∑–∏—á–µ—Å–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ** (—Å–∏–º—É–ª—è—Ç–æ—Ä –Ω–µ –∏–º–µ–µ—Ç –∫–∞–º–µ—Ä—ã!)

### –®–∞–≥–∏:
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   ```bash
   git clone <repository-url>
   cd Barcode-Scanner
   ```
2. –û—Ç–∫—Ä–æ–π—Ç–µ `BarcodeScanner.xcodeproj`
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ iPhone/iPad
4. –í—ã–±–µ—Ä–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ (‚åòR)

> üí° –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–æ—Å–∏—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ

---

## üß∞ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Swift 5.0**
- **SwiftUI** - –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π UI, `@StateObject`, `@Published`, `@Binding`
- **UIKit** - `UIViewController`, `UIViewControllerRepresentable`
- **AVFoundation** - `AVCaptureSession`, `AVCaptureMetadataOutput`, `AVCaptureVideoPreviewLayer`
- **Delegate Pattern** - –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ–±—ã—Ç–∏–π –∏–∑ UIKit –≤ SwiftUI
- **Concurrency** - `DispatchQueue` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞–º–∏

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1. UIViewControllerRepresentable
–ü—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ UIKit –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –≤ SwiftUI:
```swift
struct ScannerView: UIViewControllerRepresentable {
    func makeUIViewController(context: Context) -> ScannerViewController
    func updateUIViewController(...)
    func makeCoordinator() -> Coordinator
}
```

### 2. Coordinator Pattern
`Coordinator` –≤—ã—Å—Ç—É–ø–∞–µ—Ç –¥–µ–ª–µ–≥–∞—Ç–æ–º –¥–ª—è UIKit –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç SwiftUI —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

### 3. AVFoundation –¥–ª—è –±–∞—Ä–∫–æ–¥–æ–≤
- `AVCaptureDevice` - –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ
- `AVCaptureMetadataOutput` - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∫–æ–¥–æ–≤ (EAN-8, EAN-13)
- `metadataObjectTypes` - —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

### 4. Thread Safety
–ò–∑–º–µ–Ω–µ–Ω–∏—è `@Published` —Å–≤–æ–π—Å—Ç–≤ –≤—Å–µ–≥–¥–∞ –≤ main thread —á–µ—Ä–µ–∑ `DispatchQueue.main.async`.

---

## üó∫Ô∏è –ò–¥–µ–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è

- [ ] –í–∏–∑—É–∞–ª—å–Ω–∞—è —Ä–∞–º–∫–∞ –æ–±–ª–∞—Å—Ç–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
- [ ] –ö–Ω–æ–ø–∫–∞ "Scan Again" –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ QR-–∫–æ–¥–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (Code 128, PDF417)
- [ ] –ò—Å—Ç–æ—Ä–∏—è –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] Haptic feedback –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –∫–∞–º–µ—Ä—ã —Å UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [ ] –§–æ–Ω–∞—Ä–∏–∫ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ç–µ–º–Ω–æ—Ç–µ
- [ ] –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –±–∞—Ä–∫–æ–¥–æ–º (share sheet)
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è ViewModel
- [ ] –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (EN/RU)

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—É—á–∞—é—â–µ–≥–æ —Ç—É—Ç–æ—Ä–∏–∞–ª–∞ –æ—Ç **Sean Allen**. –ú–∞—Ç–µ—Ä–∏–∞–ª –±—ã–ª –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –∏ –¥–æ–ø–æ–ª–Ω–µ–Ω –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ SwiftUI –∏ UIKit, —Ä–∞–±–æ—Ç—ã —Å AVFoundation –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.

---

**Happy Scanning! üì≤**
